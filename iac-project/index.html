<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>IaC Project</title>
    <style>
      body { font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; padding: 2rem; color:#111 }
      a { color: #0070f3 }
      .card { max-width: 720px; margin: 2rem auto; padding: 1.5rem; border: 1px solid #eee; border-radius: 8px }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>IaC Project</h1>
      <p>Welcome to the Terraform Infrastructure as Code Project.</p>

      <h2>Prerequisites</h2>
      <ul>
        <li>Configure a GitHub Environment named <code>terraform-apply</code> with required reviewers for approval (optional, for security)</li>
        <li>Install Terraform locally (optional, for local testing)</li>
        <li>Ensure the repository is connected to Vercel for hosting the generated outputs page</li>
      </ul>

      <h2>Generate and View Terraform Outputs</h2>
      <p>Follow these steps to generate and view the Terraform outputs:</p>
      <ol>
        <li>Navigate to <a href="https://github.com/Sai240924/DevOps-Lab/actions/workflows/terraform-publish-output.yml" target="_blank" rel="noopener">GitHub Actions â†’ Terraform Apply and Publish Output</a></li>
        <li>Click the "Run workflow" button</li>
        <li>In the input field, set <code>action</code> to <code>apply</code></li>
        <li>Click "Run workflow" to start the job</li>
        <li>Wait for environment approval (if configured) and monitor the job progress</li>
        <li>Once the workflow completes successfully, refresh this page</li>
        <li>Click <a href="output.html">View Terraform Outputs</a> to see the generated outputs</li>
      </ol>

      <h2>Local Alternative (If Workflow Fails)</h2>
      <p>If the GitHub Actions workflow fails, you can generate outputs locally:</p>
      <ol>
        <li>Clone the repository: <code>git clone https://github.com/Sai240924/DevOps-Lab.git</code></li>
        <li>Navigate to the project: <code>cd DevOps-Lab/iac-project</code></li>
        <li>Initialize Terraform: <code>terraform init</code></li>
        <li>Apply the configuration: <code>terraform apply</code> (type <code>yes</code> when prompted)</li>
        <li>View outputs: <code>terraform output -json</code></li>
      </ol>

      <h2>Troubleshooting</h2>
      <ul>
        <li><strong>Workflow fails:</strong> Check the job logs in GitHub Actions for errors. Ensure the environment is approved if configured.</li>
        <li><strong>No outputs page:</strong> The <code>output.html</code> file is generated after a successful workflow run. If missing, re-run the workflow.</li>
        <li><strong>Permission issues:</strong> Ensure you have write access to the repository and the environment reviewers approve the run.</li>
        <li><strong>Local issues:</strong> Verify Terraform is installed.</li>
        <li><strong>Vercel deployment:</strong> Ensure the repository is connected to Vercel and the <code>vercel.json</code> is configured to serve files from <code>iac-project/</code>.</li>
      </ul>

      <p><strong>Note:</strong> The outputs page will be available after your first successful workflow run or local apply.</p>
    </div>
  </body>
</html>
